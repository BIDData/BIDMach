<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>edu.berkeley.bid</groupId>
	<artifactId>BIDMach</artifactId>
	<packaging>jar</packaging>
	<version>1.0.03</version>
	<name>BIDMach</name>
	<description>BIDMach performs matrix operations</description>
	<repositories>
            <repository>
                <snapshots>
                <enabled>false</enabled>
                </snapshots>
                <id>bintray-biddata-BIDData</id>
                <name>bintray</name>
                <url>http://dl.bintray.com/biddata/BIDData</url>
            </repository>
    	</repositories>
	<profiles>
		<profile>
		<id>win</id>
		<activation>
      			<os>
        			<family>Windows</family>
      			</os>
   		 </activation>
	    	<dependencies>
    			<dependency>
	        		<groupId>biddata</groupId>
        	    		<artifactId>natives</artifactId>
				<classifier>natives-win</classifier>
            			<version>0.1</version>
			</dependency>
	    	</dependencies>
		</profile>
		<profile>
		<id>mac</id>
		<activation>
      			<os>
        			<family>mac</family>
      			</os>
   		 </activation>
	    	<dependencies>
    			<dependency>
	        		<groupId>biddata</groupId>
        	    		<artifactId>natives</artifactId>
				<classifier>natives-mac</classifier>
            			<version>0.1</version>
			</dependency>
	    	</dependencies>
		</profile>
		<profile>
		<id>linux_arm</id>
		<activation>
      			<os>
        			<family>unix</family>
				<arch>arm</arch>
				<name>!mac os x</name>  <!--https://issues.apache.org/jira/browse/MNG-4983-->
      			</os>
   		 </activation>
	    	<dependencies>
    			<dependency>
	        		<groupId>biddata</groupId>
        	    		<artifactId>natives</artifactId>
				<classifier>natives-linux-arm</classifier>
            			<version>0.1</version>
			</dependency>
	    	</dependencies>
		</profile>
		<profile>
		<id>linux</id>
		<activation>
      			<os>
        			<family>unix</family>
				<name>!mac os x</name> <!--https://issues.apache.org/jira/browse/MNG-4983-->
      			</os>
   		 </activation>
	    	<dependencies>
    			<dependency>
	        		<groupId>biddata</groupId>
        	    		<artifactId>natives</artifactId>
				<classifier>natives-linux</classifier>
            			<version>0.1</version>
			</dependency>
	    	</dependencies>
		</profile>
	</profiles>
	<properties>
		<scalaVersion>2.11</scalaVersion>
	</properties>
        <dependencies>
        <dependency>
            <groupId>BIDMat</groupId>
            <artifactId>BIDMat</artifactId>
            <version>1.0.03</version>
        </dependency>
        <dependency>
            <groupId>jline</groupId>
            <artifactId>jline</artifactId>
            <version>2.11</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-math3</artifactId>
            <version>3.2</version>
        </dependency>
        <dependency>
            <groupId>org.scala-lang.modules</groupId>
            <artifactId>scala-parser-combinators_${scalaVersion}</artifactId>
            <version>1.0.2</version>
        </dependency>
        <dependency>
            <groupId>scalatest</groupId>
            <artifactId>scalatest</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>scalacheck</groupId>
            <artifactId>scalacheck</artifactId>
            <version>1.11.6</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>json-io</groupId>
            <artifactId>json-io</artifactId>
            <version>4.1.6</version>
        </dependency>
        <dependency>
            <groupId>net.jpountz.lz4</groupId>
            <artifactId>lz4</artifactId>
            <version>1.3</version>
        </dependency>
        <dependency>
            <groupId>jcuda</groupId>
            <artifactId>jcuda</artifactId>
            <version>0.7.0a</version>
        </dependency>
        <dependency>
            <groupId>jfreechart</groupId>
            <artifactId>jfreechart</artifactId>
            <version>1.0.19</version>
        </dependency>
	<dependency>
            <groupId>jcommon</groupId>
            <artifactId>jcommon</artifactId>
            <version>1.0.23</version>
        </dependency>
        <dependency>
            <groupId>jcurand</groupId>
            <artifactId>jcurand</artifactId>
            <version>0.7.0a</version>
        </dependency>
        <dependency>
            <groupId>jcusparse</groupId>
            <artifactId>jcusparse</artifactId>
            <version>0.7.0a</version>
        </dependency>
        <dependency>
            <groupId>jcublas</groupId>
            <artifactId>jcublas</artifactId>
            <version>0.7.0a</version>
        </dependency>
        <dependency>
            <groupId>jcufft</groupId>
            <artifactId>jcufft</artifactId>
            <version>0.7.0a</version>
        </dependency>
        <dependency>
            <groupId>jcusolver</groupId>
            <artifactId>jcusolver</artifactId>
            <version>0.7.0a</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>jhdf5</groupId>
            <artifactId>jhdf5</artifactId>
            <version>0.7.0a</version>
        </dependency>
        <dependency>
            <groupId>ptplot</groupId>
            <artifactId>ptplot</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>ptplotapplication</groupId>
            <artifactId>ptplotapplication</artifactId>
            <version>1.0</version>
        </dependency>
    	</dependencies> 
	<build>
		<plugins>
			<plugin>
                		<groupId>org.scala-tools</groupId>
               		 	<artifactId>maven-scala-plugin</artifactId>
                		<executions>
                    			<execution>
                        			<goals>
                            				<goal>compile</goal>
                            				<goal>testCompile</goal>
                        			</goals>
                    			</execution>
               			</executions>
                		<configuration>
                    			<jvmArgs>
                        			<jvmArg>-Xmx12g</jvmArg>
                   	 		</jvmArgs>
					<args>
						<arg>-feature</arg>
						<arg>-deprecation</arg>
						<arg>-target:jvm-1.7</arg>
					</args>
                		</configuration>
           		</plugin>
			<plugin>
        			<groupId>com.googlecode.mavennatives</groupId>
        			<artifactId>maven-nativedependencies-plugin</artifactId>
        			<version>0.0.7</version>
				<configuration>
					<nativesTargetDir>natives/</nativesTargetDir>
					<separateDirs>false</separateDirs>
				</configuration>
        			<executions>
                			<execution>
                        			<id>unpacknatives</id>
                        			<phase>generate-resources</phase>
                        			<goals>
                                			<goal>copy</goal>
                        			</goals>
                			</execution>
        			</executions>
			</plugin>
			<plugin>
        			<groupId>org.apache.maven.plugins</groupId>
	        		<artifactId>maven-shade-plugin</artifactId>
        			<version>1.5</version>
        			<executions>
          				<execution>
            					<phase>package</phase>
            					<goals>
				        		<goal>shade</goal>
	           				</goals>
						<configuration>
							<artifactSet>
								<excludes>
									<exclude>biddata:natives:*:*</exclude>
								</excludes>
							</artifactSet>
						</configuration>
        	  			</execution>
        			</executions>
	      		</plugin>
        	</plugins>
		<resources>
			<resource>
				<targetPath>lib/</targetPath>
				<directory>natives/</directory>
				<excludes>
					<exclude>**/*.jar</exclude>
				</excludes>
			</resource>
		</resources>	
    	</build>	
</project>
